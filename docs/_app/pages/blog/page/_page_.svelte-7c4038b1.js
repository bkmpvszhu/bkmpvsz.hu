import{S as X,i as F,s as G,e as B,k as j,l as T,X as I,c as $,d as _,m as y,b as q,H as k,g,o as v,p as J,q as E,n as K,t as b,a as H,h as d,P as L,w as M,x as O,y as z,j as C,B as N}from"../../../chunks/vendor-48b2defe.js";import{f as Q}from"../../../chunks/fetchPosts-28f0071a.js";import{p as S,b as V}from"../../../chunks/config-2b240d00.js";import{P as W}from"../../../chunks/PostsList-cfb8bb76.js";import{P as U}from"../../../chunks/Pagination-f42d3f58.js";import"../../../chunks/preload-helper-ec9aa979.js";function Y(l){let s,a,u,n,r,f,p,c;return{c(){s=B("h1"),a=b("Oops!"),u=j(),n=B("p"),r=b("Sorry, no posts to show here."),f=j(),p=B("a"),c=b("Back to blog"),this.h()},l(e){s=$(e,"H1",{});var h=H(s);a=d(h,"Oops!"),h.forEach(_),u=y(e),n=$(e,"P",{});var o=H(n);r=d(o,"Sorry, no posts to show here."),o.forEach(_),f=y(e),p=$(e,"A",{href:!0});var m=H(p);c=d(m,"Back to blog"),m.forEach(_),this.h()},h(){q(p,"href","/blog")},m(e,h){g(e,s,h),k(s,a),g(e,u,h),g(e,n,h),k(n,r),g(e,f,h),g(e,p,h),k(p,c)},p:L,i:L,o:L,d(e){e&&_(s),e&&_(u),e&&_(n),e&&_(f),e&&_(p)}}}function Z(l){let s,a,u,n,r,f,p,c,e,h,o,m,P,w;return e=new U({props:{currentPage:l[0],totalPosts:l[1]}}),o=new W({props:{posts:l[2]}}),P=new U({props:{currentPage:l[0],totalPosts:l[1]}}),{c(){s=B("h1"),a=b("Posts "),u=b(l[4]),n=b("\u2013"),r=b(l[3]),f=b(" of "),p=b(l[1]),c=j(),M(e.$$.fragment),h=j(),M(o.$$.fragment),m=j(),M(P.$$.fragment)},l(t){s=$(t,"H1",{});var i=H(s);a=d(i,"Posts "),u=d(i,l[4]),n=d(i,"\u2013"),r=d(i,l[3]),f=d(i," of "),p=d(i,l[1]),i.forEach(_),c=y(t),O(e.$$.fragment,t),h=y(t),O(o.$$.fragment,t),m=y(t),O(P.$$.fragment,t)},m(t,i){g(t,s,i),k(s,a),k(s,u),k(s,n),k(s,r),k(s,f),k(s,p),g(t,c,i),z(e,t,i),g(t,h,i),z(o,t,i),g(t,m,i),z(P,t,i),w=!0},p(t,i){(!w||i&16)&&C(u,t[4]),(!w||i&8)&&C(r,t[3]),(!w||i&2)&&C(p,t[1]);const A={};i&1&&(A.currentPage=t[0]),i&2&&(A.totalPosts=t[1]),e.$set(A);const R={};i&4&&(R.posts=t[2]),o.$set(R);const D={};i&1&&(D.currentPage=t[0]),i&2&&(D.totalPosts=t[1]),P.$set(D)},i(t){w||(E(e.$$.fragment,t),E(o.$$.fragment,t),E(P.$$.fragment,t),w=!0)},o(t){v(e.$$.fragment,t),v(o.$$.fragment,t),v(P.$$.fragment,t),w=!1},d(t){t&&_(s),t&&_(c),N(e,t),t&&_(h),N(o,t),t&&_(m),N(P,t)}}}function x(l){let s,a,u,n,r,f,p;document.title=s="Blog - page "+l[0];const c=[Z,Y],e=[];function h(o,m){return o[2].length?0:1}return n=h(l),r=e[n]=c[n](l),{c(){a=B("meta"),u=j(),r.c(),f=T(),this.h()},l(o){const m=I('[data-svelte="svelte-laszff"]',document.head);a=$(m,"META",{"data-key":!0,name:!0,content:!0}),m.forEach(_),u=y(o),r.l(o),f=T(),this.h()},h(){q(a,"data-key","description"),q(a,"name","description"),q(a,"content",V)},m(o,m){k(document.head,a),g(o,u,m),e[n].m(o,m),g(o,f,m),p=!0},p(o,[m]){(!p||m&1)&&s!==(s="Blog - page "+o[0])&&(document.title=s);let P=n;n=h(o),n===P?e[n].p(o,m):(K(),v(e[P],1,1,()=>{e[P]=null}),J(),r=e[n],r?r.p(o,m):(r=e[n]=c[n](o),r.c()),E(r,1),r.m(f.parentNode,f))},i(o){p||(E(r),p=!0)},o(o){v(r),p=!1},d(o){_(a),o&&_(u),e[n].d(o),o&&_(f)}}}const lt=async({fetch:l,params:s})=>{try{const a=s.page?s.page:1;if(a<=1)return{status:301,redirect:"/blog"};let u=a*S-S;const n=await l("/api/posts/count.json"),{total:r}=await n.json(),{posts:f}=await Q({offset:u,page:a});return{status:200,props:{posts:f,page:a,totalPosts:r}}}catch(a){return{status:404,error:a.message}}};function tt(l,s,a){let u,n,{page:r}=s,{totalPosts:f}=s,{posts:p=[]}=s;return l.$$set=c=>{"page"in c&&a(0,r=c.page),"totalPosts"in c&&a(1,f=c.totalPosts),"posts"in c&&a(2,p=c.posts)},l.$$.update=()=>{l.$$.dirty&1&&a(4,u=r*S-(S-1)||1),l.$$.dirty&3&&a(3,n=Math.min(r*S,f))},[r,f,p,n,u]}class it extends X{constructor(s){super();F(this,s,tt,x,G,{page:0,totalPosts:1,posts:2})}}export{it as default,lt as load};
