import{S as O,i as U,s as X,e as w,k as v,l as C,X as F,c as y,d as _,m as E,b as H,H as h,g as k,o as $,p as I,q as B,n as J,t as b,a as z,h as d,P as D,w as L,x as M,y as N,j as R,B as T}from"../../../chunks/vendor-48b2defe.js";import{f as K}from"../../../chunks/fetchPosts-594e83fc.js";import{p as S,b as Q}from"../../../chunks/config-085cc7a9.js";import{P as W}from"../../../chunks/PostsList-0ef38003.js";import{P as G}from"../../../chunks/Pagination-ebe72911.js";import"../../../chunks/preload-helper-ec9aa979.js";function Y(l){let e,o,c,r,a,f,p,m;return{c(){e=w("p"),o=w("strong"),c=b("Hopp\xE1!"),r=b(" Sajnos ebben a kateg\xF3ri\xE1ban m\xE9g nincs egy poszt sem."),a=v(),f=w("p"),p=w("a"),m=b("Vissza a f\u0151oldalra"),this.h()},l(n){e=y(n,"P",{});var g=z(e);o=y(g,"STRONG",{});var s=z(o);c=d(s,"Hopp\xE1!"),s.forEach(_),r=d(g," Sajnos ebben a kateg\xF3ri\xE1ban m\xE9g nincs egy poszt sem."),g.forEach(_),a=E(n),f=y(n,"P",{});var u=z(f);p=y(u,"A",{href:!0});var P=z(p);m=d(P,"Vissza a f\u0151oldalra"),P.forEach(_),u.forEach(_),this.h()},h(){H(p,"href","/")},m(n,g){k(n,e,g),h(e,o),h(o,c),h(e,r),k(n,a,g),k(n,f,g),h(f,p),h(p,m)},p:D,i:D,o:D,d(n){n&&_(e),n&&_(a),n&&_(f)}}}function Z(l){let e,o,c,r,a,f,p,m,n,g,s,u,P,j;return n=new G({props:{currentPage:l[0],totalPosts:l[1]}}),s=new W({props:{posts:l[2]}}),P=new G({props:{currentPage:l[0],totalPosts:l[1]}}),{c(){e=w("h1"),o=b("Posts "),c=b(l[4]),r=b("\u2013"),a=b(l[3]),f=b(" of "),p=b(l[1]),m=v(),L(n.$$.fragment),g=v(),L(s.$$.fragment),u=v(),L(P.$$.fragment)},l(t){e=y(t,"H1",{});var i=z(e);o=d(i,"Posts "),c=d(i,l[4]),r=d(i,"\u2013"),a=d(i,l[3]),f=d(i," of "),p=d(i,l[1]),i.forEach(_),m=E(t),M(n.$$.fragment,t),g=E(t),M(s.$$.fragment,t),u=E(t),M(P.$$.fragment,t)},m(t,i){k(t,e,i),h(e,o),h(e,c),h(e,r),h(e,a),h(e,f),h(e,p),k(t,m,i),N(n,t,i),k(t,g,i),N(s,t,i),k(t,u,i),N(P,t,i),j=!0},p(t,i){(!j||i&16)&&R(c,t[4]),(!j||i&8)&&R(a,t[3]),(!j||i&2)&&R(p,t[1]);const q={};i&1&&(q.currentPage=t[0]),i&2&&(q.totalPosts=t[1]),n.$set(q);const V={};i&4&&(V.posts=t[2]),s.$set(V);const A={};i&1&&(A.currentPage=t[0]),i&2&&(A.totalPosts=t[1]),P.$set(A)},i(t){j||(B(n.$$.fragment,t),B(s.$$.fragment,t),B(P.$$.fragment,t),j=!0)},o(t){$(n.$$.fragment,t),$(s.$$.fragment,t),$(P.$$.fragment,t),j=!1},d(t){t&&_(e),t&&_(m),T(n,t),t&&_(g),T(s,t),t&&_(u),T(P,t)}}}function x(l){let e,o,c,r,a,f,p;document.title=e="Blog - page "+l[0];const m=[Z,Y],n=[];function g(s,u){return s[2].length?0:1}return r=g(l),a=n[r]=m[r](l),{c(){o=w("meta"),c=v(),a.c(),f=C(),this.h()},l(s){const u=F('[data-svelte="svelte-laszff"]',document.head);o=y(u,"META",{"data-key":!0,name:!0,content:!0}),u.forEach(_),c=E(s),a.l(s),f=C(),this.h()},h(){H(o,"data-key","description"),H(o,"name","description"),H(o,"content",Q)},m(s,u){h(document.head,o),k(s,c,u),n[r].m(s,u),k(s,f,u),p=!0},p(s,[u]){(!p||u&1)&&e!==(e="Blog - page "+s[0])&&(document.title=e);let P=r;r=g(s),r===P?n[r].p(s,u):(J(),$(n[P],1,1,()=>{n[P]=null}),I(),a=n[r],a?a.p(s,u):(a=n[r]=m[r](s),a.c()),B(a,1),a.m(f.parentNode,f))},i(s){p||(B(a),p=!0)},o(s){$(a),p=!1},d(s){_(o),s&&_(c),n[r].d(s),s&&_(f)}}}const lt=async({fetch:l,params:e})=>{try{const o=e.page?e.page:1;if(o<=1)return{status:301,redirect:"/blog"};let c=o*S-S;const r=await l("/api/posts/count.json"),{total:a}=await r.json(),{posts:f}=await K({offset:c,page:o});return{status:200,props:{posts:f,page:o,totalPosts:a}}}catch(o){return{status:404,error:o.message}}};function tt(l,e,o){let c,r,{page:a}=e,{totalPosts:f}=e,{posts:p=[]}=e;return l.$$set=m=>{"page"in m&&o(0,a=m.page),"totalPosts"in m&&o(1,f=m.totalPosts),"posts"in m&&o(2,p=m.posts)},l.$$.update=()=>{l.$$.dirty&1&&o(4,c=a*S-(S-1)||1),l.$$.dirty&3&&o(3,r=Math.min(a*S,f))},[a,f,p,r,c]}class it extends O{constructor(e){super();U(this,e,tt,x,X,{page:0,totalPosts:1,posts:2})}}export{it as default,lt as load};
