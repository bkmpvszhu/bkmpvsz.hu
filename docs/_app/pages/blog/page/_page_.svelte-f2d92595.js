import{S as O,i as U,s as X,e as w,k as v,l as C,X as F,c as y,d as _,m as E,b as H,H as h,g as b,o as $,p as I,q as B,n as J,t as k,a as z,h as d,P as D,w as L,x as M,y as N,j as R,B as T}from"../../../chunks/vendor-48b2defe.js";import{f as K}from"../../../chunks/fetchPosts-2c0e7eab.js";import{p as S,b as Q}from"../../../chunks/config-adbe04da.js";import{P as W}from"../../../chunks/PostsList-b285387f.js";import{P as G}from"../../../chunks/Pagination-2a040394.js";import"../../../chunks/preload-helper-ec9aa979.js";function Y(l){let e,a,c,r,o,f,p,m;return{c(){e=w("p"),a=w("strong"),c=k("Hopp\xE1!"),r=k(" Sajnos ebben a kateg\xF3ri\xE1ban m\xE9g nincs egy poszt sem."),o=v(),f=w("p"),p=w("a"),m=k("Vissza a f\u0151oldalra"),this.h()},l(n){e=y(n,"P",{});var g=z(e);a=y(g,"STRONG",{});var s=z(a);c=d(s,"Hopp\xE1!"),s.forEach(_),r=d(g," Sajnos ebben a kateg\xF3ri\xE1ban m\xE9g nincs egy poszt sem."),g.forEach(_),o=E(n),f=y(n,"P",{});var u=z(f);p=y(u,"A",{href:!0});var P=z(p);m=d(P,"Vissza a f\u0151oldalra"),P.forEach(_),u.forEach(_),this.h()},h(){H(p,"href","/")},m(n,g){b(n,e,g),h(e,a),h(a,c),h(e,r),b(n,o,g),b(n,f,g),h(f,p),h(p,m)},p:D,i:D,o:D,d(n){n&&_(e),n&&_(o),n&&_(f)}}}function Z(l){let e,a,c,r,o,f,p,m,n,g,s,u,P,j;return n=new G({props:{currentPage:l[0],totalPosts:l[1]}}),s=new W({props:{posts:l[2]}}),P=new G({props:{currentPage:l[0],totalPosts:l[1]}}),{c(){e=w("h1"),a=k("Posts "),c=k(l[4]),r=k("\u2013"),o=k(l[3]),f=k(" of "),p=k(l[1]),m=v(),L(n.$$.fragment),g=v(),L(s.$$.fragment),u=v(),L(P.$$.fragment)},l(t){e=y(t,"H1",{});var i=z(e);a=d(i,"Posts "),c=d(i,l[4]),r=d(i,"\u2013"),o=d(i,l[3]),f=d(i," of "),p=d(i,l[1]),i.forEach(_),m=E(t),M(n.$$.fragment,t),g=E(t),M(s.$$.fragment,t),u=E(t),M(P.$$.fragment,t)},m(t,i){b(t,e,i),h(e,a),h(e,c),h(e,r),h(e,o),h(e,f),h(e,p),b(t,m,i),N(n,t,i),b(t,g,i),N(s,t,i),b(t,u,i),N(P,t,i),j=!0},p(t,i){(!j||i&16)&&R(c,t[4]),(!j||i&8)&&R(o,t[3]),(!j||i&2)&&R(p,t[1]);const q={};i&1&&(q.currentPage=t[0]),i&2&&(q.totalPosts=t[1]),n.$set(q);const V={};i&4&&(V.posts=t[2]),s.$set(V);const A={};i&1&&(A.currentPage=t[0]),i&2&&(A.totalPosts=t[1]),P.$set(A)},i(t){j||(B(n.$$.fragment,t),B(s.$$.fragment,t),B(P.$$.fragment,t),j=!0)},o(t){$(n.$$.fragment,t),$(s.$$.fragment,t),$(P.$$.fragment,t),j=!1},d(t){t&&_(e),t&&_(m),T(n,t),t&&_(g),T(s,t),t&&_(u),T(P,t)}}}function x(l){let e,a,c,r,o,f,p;document.title=e="Blog - page "+l[0];const m=[Z,Y],n=[];function g(s,u){return s[2].length?0:1}return r=g(l),o=n[r]=m[r](l),{c(){a=w("meta"),c=v(),o.c(),f=C(),this.h()},l(s){const u=F('[data-svelte="svelte-laszff"]',document.head);a=y(u,"META",{"data-key":!0,name:!0,content:!0}),u.forEach(_),c=E(s),o.l(s),f=C(),this.h()},h(){H(a,"data-key","description"),H(a,"name","description"),H(a,"content",Q)},m(s,u){h(document.head,a),b(s,c,u),n[r].m(s,u),b(s,f,u),p=!0},p(s,[u]){(!p||u&1)&&e!==(e="Blog - page "+s[0])&&(document.title=e);let P=r;r=g(s),r===P?n[r].p(s,u):(J(),$(n[P],1,1,()=>{n[P]=null}),I(),o=n[r],o?o.p(s,u):(o=n[r]=m[r](s),o.c()),B(o,1),o.m(f.parentNode,f))},i(s){p||(B(o),p=!0)},o(s){$(o),p=!1},d(s){_(a),s&&_(c),n[r].d(s),s&&_(f)}}}const lt=async({fetch:l,params:e})=>{try{const a=e.page?e.page:1;if(a<=1)return{status:301,redirect:"/blog"};let c=a*S-S;const r=await l("/api/posts/count.json"),{total:o}=await r.json(),{posts:f}=await K({offset:c,page:a});return{status:200,props:{posts:f,page:a,totalPosts:o}}}catch(a){return{status:404,error:a.message}}};function tt(l,e,a){let c,r,{page:o}=e,{totalPosts:f}=e,{posts:p=[]}=e;return l.$$set=m=>{"page"in m&&a(0,o=m.page),"totalPosts"in m&&a(1,f=m.totalPosts),"posts"in m&&a(2,p=m.posts)},l.$$.update=()=>{l.$$.dirty&1&&a(4,c=o*S-(S-1)||1),l.$$.dirty&3&&a(3,r=Math.min(o*S,f))},[o,f,p,r,c]}class it extends O{constructor(e){super();U(this,e,tt,x,X,{page:0,totalPosts:1,posts:2})}}export{it as default,lt as load};
