import{S as O,i as U,s as X,e as w,k as v,l as C,X as F,c as y,d as _,m as E,b as H,H as h,g as b,o as $,p as I,q as B,n as J,t as k,a as z,h as d,P as A,w as D,x as L,y as M,j as N,B as R}from"../../../../chunks/vendor-48b2defe.js";import{f as K}from"../../../../chunks/fetchPosts-0e4d9975.js";import{p as T,b as Q}from"../../../../chunks/config-2b240d00.js";import{P as W}from"../../../../chunks/PostsList-cfb8bb76.js";import{P as G}from"../../../../chunks/Pagination-f42d3f58.js";import"../../../../chunks/preload-helper-ec9aa979.js";function Y(l){let e,n,m,r,o,f,p,c;return{c(){e=w("p"),n=w("strong"),m=k("Hopp\xE1!"),r=k(" Sajnos ebben a kateg\xF3ri\xE1ban m\xE9g nincs egy poszt sem."),o=v(),f=w("p"),p=w("a"),c=k("Vissza a f\u0151oldalra"),this.h()},l(a){e=y(a,"P",{});var g=z(e);n=y(g,"STRONG",{});var s=z(n);m=d(s,"Hopp\xE1!"),s.forEach(_),r=d(g," Sajnos ebben a kateg\xF3ri\xE1ban m\xE9g nincs egy poszt sem."),g.forEach(_),o=E(a),f=y(a,"P",{});var u=z(f);p=y(u,"A",{href:!0});var P=z(p);c=d(P,"Vissza a f\u0151oldalra"),P.forEach(_),u.forEach(_),this.h()},h(){H(p,"href","/")},m(a,g){b(a,e,g),h(e,n),h(n,m),h(e,r),b(a,o,g),b(a,f,g),h(f,p),h(p,c)},p:A,i:A,o:A,d(a){a&&_(e),a&&_(o),a&&_(f)}}}function Z(l){let e,n,m,r,o,f,p,c,a,g,s,u,P,j;return a=new G({props:{currentPage:l[0],totalPosts:l[1]}}),s=new W({props:{posts:l[2]}}),P=new G({props:{currentPage:l[0],totalPosts:l[1]}}),{c(){e=w("h1"),n=k("Posts "),m=k(l[4]),r=k("\u2013"),o=k(l[3]),f=k(" of "),p=k(l[1]),c=v(),D(a.$$.fragment),g=v(),D(s.$$.fragment),u=v(),D(P.$$.fragment)},l(t){e=y(t,"H1",{});var i=z(e);n=d(i,"Posts "),m=d(i,l[4]),r=d(i,"\u2013"),o=d(i,l[3]),f=d(i," of "),p=d(i,l[1]),i.forEach(_),c=E(t),L(a.$$.fragment,t),g=E(t),L(s.$$.fragment,t),u=E(t),L(P.$$.fragment,t)},m(t,i){b(t,e,i),h(e,n),h(e,m),h(e,r),h(e,o),h(e,f),h(e,p),b(t,c,i),M(a,t,i),b(t,g,i),M(s,t,i),b(t,u,i),M(P,t,i),j=!0},p(t,i){(!j||i&16)&&N(m,t[4]),(!j||i&8)&&N(o,t[3]),(!j||i&2)&&N(p,t[1]);const S={};i&1&&(S.currentPage=t[0]),i&2&&(S.totalPosts=t[1]),a.$set(S);const V={};i&4&&(V.posts=t[2]),s.$set(V);const q={};i&1&&(q.currentPage=t[0]),i&2&&(q.totalPosts=t[1]),P.$set(q)},i(t){j||(B(a.$$.fragment,t),B(s.$$.fragment,t),B(P.$$.fragment,t),j=!0)},o(t){$(a.$$.fragment,t),$(s.$$.fragment,t),$(P.$$.fragment,t),j=!1},d(t){t&&_(e),t&&_(c),R(a,t),t&&_(g),R(s,t),t&&_(u),R(P,t)}}}function x(l){let e,n,m,r,o,f,p;document.title=e="Blog - page "+l[0];const c=[Z,Y],a=[];function g(s,u){return s[2].length?0:1}return r=g(l),o=a[r]=c[r](l),{c(){n=w("meta"),m=v(),o.c(),f=C(),this.h()},l(s){const u=F('[data-svelte="svelte-1qczpud"]',document.head);n=y(u,"META",{"data-key":!0,name:!0}),u.forEach(_),m=E(s),o.l(s),f=C(),this.h()},h(){H(n,"data-key","description"),H(n,"name",Q)},m(s,u){h(document.head,n),b(s,m,u),a[r].m(s,u),b(s,f,u),p=!0},p(s,[u]){(!p||u&1)&&e!==(e="Blog - page "+s[0])&&(document.title=e);let P=r;r=g(s),r===P?a[r].p(s,u):(J(),$(a[P],1,1,()=>{a[P]=null}),I(),o=a[r],o?o.p(s,u):(o=a[r]=c[r](s),o.c()),B(o,1),o.m(f.parentNode,f))},i(s){p||(B(o),p=!0)},o(s){$(o),p=!1},d(s){_(n),s&&_(m),a[r].d(s),s&&_(f)}}}const lt=async({fetch:l,params:e})=>{try{const n=e.page?e.page:1;if(n<=1)return{status:301,redirect:"/"};let m=0;const r=await l("/api/posts/count.json"),{total:o}=await r.json(),{posts:f}=await K({offset:m,page:n});return{status:200,props:{posts:f,page:n,totalPosts:o}}}catch(n){return{status:404,error:n.message}}};function tt(l,e,n){let m,r,{page:o}=e,{totalPosts:f}=e,{posts:p=[]}=e;return l.$$set=c=>{"page"in c&&n(0,o=c.page),"totalPosts"in c&&n(1,f=c.totalPosts),"posts"in c&&n(2,p=c.posts)},l.$$.update=()=>{l.$$.dirty&1&&n(4,m=o*T-(T-1)||1),l.$$.dirty&3&&n(3,r=Math.min(o*T,f))},[o,f,p,r,m]}class it extends O{constructor(e){super();U(this,e,tt,x,X,{page:0,totalPosts:1,posts:2})}}export{it as default,lt as load};
